---
sectionclass: h2
sectionid: acr
parent-id: devops
title: DevOps - Create private highly available container registry 
---

Instead of using the public Docker Hub registry, create your own private container registry using Azure Container Registry (ACR).

### Tasks

#### Create an Azure Container Registry (ACR)

{% collapsible %}

```sh
az acr create --resource-group akschallenge --name <unique-acr-name> --sku Standard
```

{% endcollapsible %}

#### Push the container images to your new registry

{% collapsible %}

##### Login to the registry

```sh
az acr login --name <unique-acr-name>
```

##### Pull the container image locally (or on Azure Cloud Shell)

```sh
docker pull azch/captureorder
```

##### Retag container image to Azure Container Registry

```sh
docker tag azch/captureorder <unique-acr-name>.azurecr.io/captureorder
```

##### Push the image to Azure Container Registry

```sh
docker push <unique-acr-name>.azurecr.io/captureorder
```

{% endcollapsible %}

#### Configure your application to pull from your private registry

{% collapsible %}

##### Authorize the AKS cluster to connect to the Azure Container Registry

Follow the instructions that [grant access using Azure Active Directory Service Principals](https://docs.microsoft.com/en-us/azure/container-registry/container-registry-auth-aks).

### Update image tag in the YAML deployment

Replace the image tag with the location of the new image on Azure Container Registry

```yaml
spec:
    containers:
      - name: captureorder
        image: <unique-acr-name>.azurecr.io/captureorder
```

{% endcollapsible %}

> **Resources**
> * <https://docs.microsoft.com/en-us/azure/container-registry?wt.mc_id=CSE_(606698)>
> * <https://docs.microsoft.com/en-us/azure/container-registry/container-registry-auth-aks>